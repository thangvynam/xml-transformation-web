
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
     <!-- Font -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
     <!-- Google font -->
     <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">

     <!-- Bootstrap -->
     <link type="text/css" rel="stylesheet" href="./css/bootstrap.min.css"/>

     <!-- Slick -->
     <link type="text/css" rel="stylesheet" href="./css/slick.css"/>
     <link type="text/css" rel="stylesheet" href="./css/slick-theme.css"/>

     <!-- nouislider -->
     <link type="text/css" rel="stylesheet" href="./css/nouislider.min.css"/>

     <!-- Font Awesome Icon -->
     <link rel="stylesheet" href="./css/font-awesome.min.css">

     <!-- Custom stlylesheet -->
     <link type="text/css" rel="stylesheet" href="./css/style.css"/>
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

     <!-- jQuery library -->
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

     <!-- Latest compiled JavaScript -->
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
 
    <title>PN DEV</title>
    <style>
        .khoi{
            width: 400px;
            height: 50px;
            margin:auto
        }
        .khoi1{
            display: block;
            position: relative;
            width: 100px;
            float: left;
        }
        .khoi2{
            display: block;
            margin-right: 50px;
            position: relative;
            width: 200px;
            float: right;
        }

        .khoi3{
            margin-right: 25px;
        }

        .lon{
            color: #1490c0fa;
            background-color: white;
            padding-top: 10px;
            padding-bottom: 20px;
            padding-left: 20px;
            padding-right: 20px;
            border-radius: 15px;
            border-color:#d2d2d2;
            border-width: 5px;
            box-shadow:0 1px 0 #cfcfcf;
            margin-left: 20em;
            margin-right: 20em
            
        }
        ul li{
            float: left;
            margin-left: 2em;
        }
        #top-heade{
            padding-bottom: 20px;
            
        }
        #username{
            font-size: 2em
        }
        body{
            background-color: #EDEDED;
        }
        
    </style>
</head>
<body >
        <div id="signupalert" style="display:none" class="alert alert-danger">
            <a href="./signin.html">
                <center>You must sign in</center>
            </a>    
        </div>
        <header>
            <div id="top-heade">
                
                <nav class="navbar navbar-default">
                    <div class="container-fluid">
                      <ul class="nav navbar-nav">
                        
                        <li><a href="./danhsachphieuban.html">Đơn hàng </a></li>
                      </ul>
                        <ul class="header-links pull-right">
                            <li><a id="username" href="#" style="color: red;"><i class="fa fa-user-o"></i> Login</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
            <!-- /TOP HEADER -->       
        </header>
        <div class="lon">
                <div class="row text-center"><strong style="font-size: 30px">Phiếu Bán</strong></div>
                <div class="row" >
                    <div class="khoi">
                        <label class="khoi1">Họ tên khách: </label>
                        <input class="khoi2" type="text" id="hoten">
                    </div>
                    <div  class="khoi">
                        <label  class="khoi1">Chọn ngày: </label>
                        <input  class="khoi2" type="text" id="datepicker">
                    </div>
                    
                    
                </div>
                <div class="row" style="margin-top:20px">
                    <div class="khoi"> 
                            <label class="khoi1" >Loại điện thoại: </label>
                            <select class="khoi2" id="idSelect" style="width:199px; height:26px;margin-right: 13%;">
                                <option selected disabled hidden>Choose here</option>
                            </select>
                    </div>
                    <div class="khoi">
                            <label >Số lượng:</label>
                            <input class="khoi2" type="number" id="soluong" onkeyup="TinhTien()" >
                    </div>
                    <div class="khoi">
                        <img id="imgArrow" src="./img/right-arrow.jpg" style="width:50px;height:50px;cursor:pointer" alt="right-arrow">
                        <span class="khoi2" style="font-size:20px">Tiền : </span>
                        <span class="khoi2" id="tien"></span>
                    </div>
                   
                    
                   
                </div>
                <div class="row text-center" style="padding-bottom:30px;">
                    <button class="btn btn-info" onclick="Nhap_Hang()" style="width:100px; height:30px; margin-top:20px;">Nhập </button>
                    <button class="btn btn-info" onclick="Lam_Moi()" style="width:100px; height:30px; margin-top:20px; margin-left:20px;">Làm mới</button>
                </div>
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script src="./js/myscript.js"></script>

        <script>
            
            $(function(){
                var Dia_chi_Dich_vu="http://localhost:3001/Check" // gửi qua DAL xử lý 
                var xhttp = new XMLHttpRequest();
                xhttp.open("GET", Dia_chi_Dich_vu, false);
                xhttp.send();
                json = JSON.parse(xhttp.responseText);
               
                if(typeof json.isLogin === 'undefined'){
                    $(".lon").css("display", "none");
                    $("#top-heade").css("display", "none");
                    $("#signupalert").css("display", "inherit");
                }else{
                    json=getNameIsLogin()
                    tenNV=json.username
                    $("#username").html(tenNV);
                    $("#datepicker").datepicker({
                    dateFormat: 'dd-mm-yy',
                    changeMonth: true,
                    changeYear: true})
                    Danh_sach_Mat_hang=Doc_Danh_sach_Mat_hang()
                    var data = Du_lieu_dien_thoai(Danh_sach_Mat_hang)
                    var select = document.getElementById('idSelect');
                    for (var i = 0; i<data.length; i++){
                    var opt = document.createElement('option');
                    opt.value = data[i];
                    opt.innerHTML = data[i];
                    select.appendChild(opt);
                    $("#imgArrow").click(function(){
                        selectedValue = select.options[select.selectedIndex].text;
                        if(selectedValue!="Choose here"){
                            var soluong = parseInt($("#soluong").val())
                            json =nameProduct(selectedValue,Danh_sach_Mat_hang)
                            $("#tien").html(soluong*parseInt(JSON.parse(json).Don_gia_Ban))
                        }
                    
                    })
            }
                }
            })

            function Nhap_Hang(){
                var tenKhach=$("#hoten").val()
                var soluong=$("#soluong").val()
                var ngay=$("#datepicker").val()
                
                var tien =$("#tien").text()
                var Dia_chi_Dich_vu="http://localhost:3001/phieuban" // gửi qua DAL xử lý 
                var xhttp = new XMLHttpRequest();
                xhttp.open("POST", Dia_chi_Dich_vu, false);
                xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                xhttp.send(tenNV+"&"+tenKhach+"&"+soluong+"&"+ngay+"&"+selectedValue+"&"+tien);
                alert("Đã thêm thành công ")
                $("#hoten").val("")
                $("#soluong").val("")
                $("#datepicker").val("")
                $("#tien").text("")
            }
        </script>
</body>
</html>